<!doctype html>
<html lang="pt-BR">
 <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Planilha de Hor√°rio Interativa</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
    :root{
      --bg:#0b1220;
      --card:#0f172a;
      --grid:rgba(255,255,255,.18);
      --text:#eaf0ff;
      --muted:#a9b3d1;
      --extBg:rgba(245,158,11,.14);
      --extBd:rgba(245,158,11,.55);
      --aulaBg:rgba(124,58,237,.14);
      --aulaBd:rgba(124,58,237,.55);
      --compBg:rgba(16,185,129,.14);
      --compBd:rgba(16,185,129,.55);
      --radius:16px;
      --shadow:0 18px 40px rgba(0,0,0,.35);
      --mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
      --sans:system-ui,-apple-system,Segoe UI,Roboto,Arial,"Noto Sans","Helvetica Neue",sans-serif;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:var(--sans);
      background:radial-gradient(1200px 800px at 20% 10%,rgba(124,58,237,.25),transparent 55%),radial-gradient(900px 600px at 85% 15%,rgba(16,185,129,.18),transparent 60%),var(--bg);
      color:var(--text);
      padding:18px;
      overflow:auto;
    }
    .app-wrapper{width:100%;height:100%;overflow:auto}
    .wrap{max-width:1200px;margin:0 auto}
    header{display:flex;justify-content:space-between;align-items:flex-start;gap:12px;flex-wrap:wrap;margin-bottom:16px}
    h1{margin:0;font-size:20px;font-weight:800}
    .header-actions{display:flex;gap:8px;flex-wrap:wrap}
    .sub{margin:8px 0 0;color:var(--muted);font-size:13px;max-width:820px;line-height:1.35}
    .btn{border:1px solid var(--grid);background:rgba(255,255,255,.06);color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;font-size:13px;transition:all 0.2s}
    .btn:hover{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.25)}
    .btn:active{transform:scale(0.98)}
    .btn-primary{background:rgba(16,185,129,.3);border-color:rgba(16,185,129,.6)}
    .btn-primary:hover{background:rgba(16,185,129,.4);border-color:rgba(16,185,129,.8)}
    .card{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid var(--grid);border-radius:var(--radius);box-shadow:var(--shadow);overflow:hidden}
    .controls{padding:14px;border-bottom:1px solid var(--grid);display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .filter-group{display:flex;gap:6px;flex-wrap:wrap}
    .filter-btn{padding:6px 12px;font-size:12px;border:1px solid var(--grid);background:rgba(255,255,255,.04);color:var(--muted);border-radius:8px;cursor:pointer;transition:all 0.2s}
    .filter-btn.active{background:rgba(255,255,255,.12);color:var(--text);border-color:rgba(255,255,255,.3)}
    .summary-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;padding:12px 14px;border-bottom:1px solid var(--grid)}
    .summary-card{background:rgba(255,255,255,.05);border:1px solid var(--grid);border-radius:10px;padding:10px 12px;text-align:center}
    .summary-label{font-size:11px;color:var(--muted);margin-bottom:4px}
    .summary-value{font-size:16px;font-weight:800;color:var(--text);font-family:var(--mono)}
    .table-wrapper{overflow-x:auto}
    table{width:100%;border-collapse:collapse}
    th,td{border:1px solid var(--grid);padding:8px 8px;vertical-align:top;font-size:12.5px;min-height:44px}
    th{background:rgba(255,255,255,.05);color:var(--muted);text-align:center;font-weight:800}
    td.time{width:132px;font-family:var(--mono);color:var(--text);font-weight:800;background:rgba(255,255,255,.08);white-space:normal;position:sticky;left:0;z-index:5;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:2px}
    td.time .hour-display{font-size:13px;font-weight:800;color:var(--text)}
    td.time .duration{font-size:10px;color:var(--muted);font-weight:500}
    td.edit-cell{padding:4px;cursor:pointer;position:relative}
    .cell{border-radius:12px;padding:7px 8px;border:1px solid transparent;line-height:1.3;min-height:40px;display:flex;align-items:center;justify-content:center;text-align:center;transition:all 0.2s;flex-direction:column;gap:2px}
    .cell:hover{opacity:0.8;box-shadow:0 0 8px rgba(255,255,255,.1)}
    .cell-empty{background:transparent;border:1px dashed var(--grid);color:var(--muted);font-size:11px;cursor:pointer}
    .cell-empty:hover{background:rgba(255,255,255,.05);border-color:rgba(255,255,255,.25)}
    .ext{background:var(--extBg);border-color:var(--extBd)}
    .aula{background:var(--aulaBg);border-color:var(--aulaBd)}
    .comp{background:var(--compBg);border-color:var(--compBd)}
    .cell-title{font-size:12px;font-weight:700}
    .cell-subtitle{font-size:10px;color:rgba(255,255,255,.7)}
    .legend{display:flex;gap:10px;flex-wrap:wrap;padding:12px 14px;border-top:1px solid var(--grid);color:var(--muted);font-size:12px}
    .dot{width:10px;height:10px;border-radius:50%;display:inline-block;margin-right:6px;vertical-align:middle}
    .dot.ext{background:rgba(245,158,11,.9)}
    .dot.aula{background:rgba(124,58,237,.9)}
    .dot.comp{background:rgba(16,185,129,.9)}
    .modal-overlay{display:none;position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.7);z-index:1000;backdrop-filter:blur(4px);align-items:center;justify-content:center}
    .modal-overlay.active{display:flex}
    .modal{background:var(--card);border:1px solid var(--grid);border-radius:var(--radius);padding:20px;max-width:500px;width:90%;box-shadow:var(--shadow);max-height:80vh;overflow-y:auto}
    .modal-header{font-size:16px;font-weight:800;margin-bottom:16px;color:var(--text)}
    .modal-input{width:100%;background:rgba(255,255,255,.06);border:1px solid var(--grid);color:var(--text);padding:10px 12px;border-radius:10px;font-family:var(--sans);margin-bottom:12px;font-size:13px}
    .modal-input::placeholder{color:var(--muted)}
    .modal-actions{display:flex;gap:10px;margin-top:16px}
    .modal-actions button{flex:1}
    .toast{position:fixed;bottom:20px;right:20px;background:rgba(16,185,129,.9);border:1px solid rgba(16,185,129,1);color:var(--text);padding:12px 16px;border-radius:10px;font-size:13px;z-index:2000;animation:slideIn 0.3s ease-out}
    @keyframes slideIn{from{transform:translateX(400px);opacity:0}to{transform:translateX(0);opacity:1}}
    .export-menu{display:none;position:absolute;top:100%;right:0;background:var(--card);border:1px solid var(--grid);border-radius:10px;box-shadow:var(--shadow);z-index:100;min-width:160px;margin-top:4px}
    .export-menu.active{display:block}
    .export-menu button{display:block;width:100%;text-align:left;padding:10px 14px;background:none;border:none;color:var(--text);cursor:pointer;font-size:13px;transition:background 0.2s}
    .export-menu button:hover{background:rgba(255,255,255,.08)}
    .export-menu button:first-child{border-radius:10px 10px 0 0}
    .export-menu button:last-child{border-radius:0 0 10px 10px}
    @media(max-width:768px){
      .header-actions{width:100%}
      .controls{flex-direction:column;align-items:flex-start}
      .summary-grid{grid-template-columns:repeat(auto-fit,minmax(100px,1fr))}
      th,td{padding:6px 4px;font-size:11px}
      .cell{min-height:36px;font-size:11px}
    }
    @media print{
      body{background:#fff;color:#000}
      .card{box-shadow:none}
      .header-actions,.controls{display:none}
      th{background:#f2f2f2;color:#333}
      td.time{background:#fafafa;color:#000}
      .sub,.legend,.summary-label{color:#333}
      .summary-value{color:#000}
    }
  </style>
  <script src="https://cdn.tailwindcss.com/3.4.17" type="text/javascript"></script>
  <style>body { box-sizing: border-box; }</style>
 </head>
 <body>
  <div class="app-wrapper">
   <div class="wrap">
    <header>
     <div>
      <h1 id="app-title">Planilha de Hor√°rio ‚Äî T40</h1>
      <p class="sub">Planilha interativa com aulas, EXT/Projetos e compensa√ß√£o para completar 40h semanais.</p>
     </div>
     <div class="header-actions" style="position:relative"><button class="btn" id="export-btn">üì• Exportar</button>
      <div class="export-menu" id="export-menu"><button onclick="exportPDF()">Salvar como PDF</button> <button onclick="exportCSV()">Baixar CSV</button> <button onclick="exportJSON()">Baixar JSON</button>
      </div><button class="btn btn-primary" onclick="window.print()">üñ®Ô∏è Imprimir</button>
     </div>
    </header>
    <section class="card">
     <div class="controls"><span style="color:var(--muted);font-size:12px;font-weight:700">FILTRAR:</span>
      <div class="filter-group"><button class="filter-btn active" onclick="filterType('all')">Todos</button> <button class="filter-btn" onclick="filterType('aula')">üéì Aulas</button> <button class="filter-btn" onclick="filterType('comp')">‚ßâ Compensa√ß√£o</button> <button class="filter-btn" onclick="filterType('ext')">‚ñ† EXT/Projetos</button>
      </div>
     </div>
     <div class="summary-grid" id="summary">
      <div class="summary-card">
       <div class="summary-label">
        Total Semana
       </div>
       <div class="summary-value" id="total-week">
        0h
       </div>
      </div>
      <div class="summary-card">
       <div class="summary-label">
        Aulas
       </div>
       <div class="summary-value" id="total-aulas">
        0h
       </div>
      </div>
      <div class="summary-card">
       <div class="summary-label">
        EXT/Projetos
       </div>
       <div class="summary-value" id="total-ext">
        0h
       </div>
      </div>
      <div class="summary-card">
       <div class="summary-label">
        Compensa√ß√£o
       </div>
       <div class="summary-value" id="total-comp">
        0h
       </div>
      </div>
     </div>
     <div class="table-wrapper">
      <table id="schedule-table" aria-label="Planilha de Hor√°rio">
       <thead>
        <tr>
         <th style="width:132px">Hor√°rio</th>
         <th id="header-monday">Segunda</th>
         <th id="header-tuesday">Ter√ßa</th>
         <th id="header-wednesday">Quarta</th>
         <th id="header-thursday">Quinta</th>
         <th id="header-friday">Sexta</th>
        </tr>
       </thead>
       <tbody id="table-body"></tbody>
      </table>
     </div>
     <div class="legend"><span><span class="dot aula"></span><strong>Aulas</strong></span> <span><span class="dot ext"></span><strong>EXT / Projetos</strong></span> <span><span class="dot comp"></span><strong>Compensa√ß√£o</strong></span>
     </div>
    </section>
   </div>
  </div>
  <div class="modal-overlay" id="edit-modal">
   <div class="modal">
    <div class="modal-header">
     Editar Bloco
    </div><label style="display:block;color:var(--muted);font-size:12px;margin-bottom:6px">Tipo de Atividade</label> <select id="cell-type" class="modal-input" style="padding:8px;font-size:13px"> <option value="">‚Äî Vazio ‚Äî</option> <option value="aula">üéì Aula</option> <option value="comp">‚ßâ Compensa√ß√£o</option> <option value="ext">‚ñ† EXT/Projetos</option> </select> <label style="display:block;color:var(--muted);font-size:12px;margin-bottom:6px;margin-top:6px">Nome da Amizade/Turma</label> <input type="text" id="cell-turma" class="modal-input" placeholder="Ex: T40, T41, Turma A"> <label style="display:block;color:var(--muted);font-size:12px;margin-bottom:6px;margin-top:6px">Descri√ß√£o (opcional)</label> <input type="text" id="cell-content" class="modal-input" placeholder="Ex: Biologia, HA-H79, Projeto X">
    <div class="modal-actions"><button class="btn" onclick="closeModal()">Cancelar</button> <button class="btn btn-primary" onclick="saveCell()">Salvar</button>
    </div>
   </div>
  </div>
  <script>
let scheduleData = [];
let currentFilter = 'all';
let editingCell = null;

const DEFAULT_TEMPLATE = (() => {
  const days = ['monday','tuesday','wednesday','thursday','friday'];
  const data = [];

  function setCell(timeSlot, day, type, turma, content){
    data.push({ timeSlot, day, value: `${type}::${turma}::${content}` });
  }

  // ‚úÖ NOTURNO (4 blocos)
  const night = ['19:30‚Äì20:20','20:21‚Äì21:10','21:20‚Äì22:10','22:11‚Äì23:00'];

  night.forEach(t => {
    setCell(t,'monday','aula','Noturno','Biologia');
    setCell(t,'tuesday','aula','Noturno','Ed. F√≠sica 32');
    setCell(t,'wednesday','aula','Noturno','Ed. F√≠sica 32');
    setCell(t,'thursday','aula','Noturno','Ed. F√≠sica 33');
    setCell(t,'friday','aula','Noturno','Nutri√ß√£o');
  });

  // ‚úÖ DIURNO (completa com EXT / HA / Projetos)
  const daytime = [
    '07:45‚Äì08:35','08:36‚Äì09:25','09:40‚Äì10:30',
    '10:31‚Äì11:20','11:21‚Äì12:10',
    '13:30‚Äì14:20','14:21‚Äì15:10','15:30‚Äì16:20'
  ];

  daytime.forEach((t, idx) => {
    days.forEach((day, dIdx) => {
      const useExt = (idx + dIdx) % 2 === 0;
      if (useExt){
        setCell(t, day, 'ext', 'EXT', 'EXT / Projetos');
      } else {
        setCell(t, day, 'comp', 'HA', 'HA / Projetos');
      }
    });
  });

  return data;
})();

const HOURS = [
  { time: '07:45‚Äì08:35', type: 'day' },
  { time: '08:36‚Äì09:25', type: 'day' },
  { time: '09:40‚Äì10:30', type: 'day' },
  { time: '10:31‚Äì11:20', type: 'comp-block' },
  { time: '11:21‚Äì12:10', type: 'comp-block' },
  { time: '‚Äî', type: 'break' },
  { time: '13:30‚Äì14:20', type: 'comp-block' },
  { time: '14:21‚Äì15:10', type: 'comp-block' },
  { time: '15:30‚Äì16:20', type: 'comp-block' },
  { time: '16:21‚Äì17:10', type: 'rest' },
  { time: '17:11‚Äì18:00', type: 'rest' },
  { time: '18:01‚Äì19:30', type: 'rest' },
  { time: '19:30‚Äì20:20', type: 'night' },
  { time: '20:21‚Äì21:10', type: 'night' },
  { time: '21:20‚Äì22:10', type: 'night' },
  { time: '22:11‚Äì23:00', type: 'night' }
];

const dataHandler = {
  onDataChanged(data) {
    scheduleData = data;
    renderTable();
    updateSummary();
  }
};





async function initApp() {
  await window.dataSdk.init(dataHandler);
  updateWeekHeaders();
  renderTable();
  updateSummary();

  window.elementSdk.init({
    defaultConfig: {
      app_title: 'Planilha de Hor√°rio ‚Äî T40'
    },
    onConfigChange(config) {
      document.getElementById('app-title').textContent = config.app_title;
    },
    mapToCapabilities(config) {
      return {
        recolorables: [],
        borderables: [],
        fontEditable: undefined,
        fontSizeable: undefined
      };
    },
    mapToEditPanelValues(config) {
      return new Map([['app_title', config.app_title]]);
    }
  });
}

function updateWeekHeaders() {
  const today = new Date();
  const dayOfWeek = today.getDay();
  const monday = new Date(today);
  monday.setDate(today.getDate() - (dayOfWeek === 0 ? 6 : dayOfWeek - 1));

  const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
  const dayNames = ['Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta'];

  days.forEach((day, idx) => {
    const date = new Date(monday);
    date.setDate(monday.getDate() + idx);
    const dayName = dayNames[idx];
    const dayNum = String(date.getDate()).padStart(2, '0');
    const monthNum = String(date.getMonth() + 1).padStart(2, '0');
    const header = document.getElementById(`header-${day}`);
    header.innerHTML = `${dayName}<br><span style="font-size:11px;color:var(--muted);font-weight:500">${dayNum}/${monthNum}</span>`;
  });
}

function renderTable() {
  const tbody = document.getElementById('table-body');
  tbody.innerHTML = '';

  HOURS.forEach((hour) => {
    const tr = document.createElement('tr');
    const timeCell = document.createElement('td');
    timeCell.className = 'time';

    if (hour.time === '‚Äî') {
      timeCell.innerHTML = '<span class="hour-display">‚Äî</span><span class="duration">Intervalo</span>';
    } else {
      const [start, end] = hour.time.split('‚Äì');
      const [sh, sm] = start.split(':').map(Number);
      const [eh, em] = end.split(':').map(Number);
      const minutes = (eh * 60 + em) - (sh * 60 + sm);
      const durationHours = Math.floor(minutes / 60);
      const durationMins = minutes % 60;
      const durationStr = durationMins > 0 ? `${durationHours}h${durationMins}min` : `${durationHours}h`;
      timeCell.innerHTML = `<span class="hour-display">${hour.time}</span><span class="duration">${durationStr}</span>`;
    }

    tr.appendChild(timeCell);

    const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];

    days.forEach(day => {
      const td = document.createElement('td');
      td.className = 'edit-cell';

      const record = scheduleData.find(r => r.timeSlot === hour.time && r[day]);

      if (record && record[day]) {
        const parts = record[day].split('::');
        const type = parts[0];
        const turma = parts[1] || '';
        const content = parts[2] || '';
        const div = document.createElement('div');
        div.className = `cell ${type}`;
        div.innerHTML = `<span class="cell-title">${turma || '‚Äî'}</span><span class="cell-subtitle">${content || '‚Äî'}</span>`;
        div.onclick = () => openEditModal(hour.time, day, type, turma, content);
        td.appendChild(div);
      } else {
        const div = document.createElement('div');
        div.className = 'cell cell-empty';
        div.textContent = '+ Adicionar';
        div.onclick = () => openEditModal(hour.time, day, '', '', '');
        td.appendChild(div);
      }

      tr.appendChild(td);
    });

    tbody.appendChild(tr);
  });

  applyFilter();
}

function openEditModal(time, day, type = '', turma = '', content = '') {
  editingCell = { time, day, type, turma, content };
  document.getElementById('cell-type').value = type;
  document.getElementById('cell-turma').value = turma;
  document.getElementById('cell-content').value = content;
  document.getElementById('edit-modal').classList.add('active');
}

function closeModal() {
  document.getElementById('edit-modal').classList.remove('active');
  editingCell = null;
}

async function saveCell() {
  if (!editingCell) return;

  const type = document.getElementById('cell-type').value;
  const turma = document.getElementById('cell-turma').value.trim();
  const content = document.getElementById('cell-content').value.trim();

  if (!type && (turma || content)) {
    showToast('Selecione um tipo de atividade');
    return;
  }

  const { time, day } = editingCell;
  let existing = scheduleData.find(r => r.timeSlot === time);

  if (!type) {
    if (existing) {
      existing[day] = '';
      await window.dataSdk.update(existing);
    }
  } else {
    const cellData = `${type}::${turma}::${content}`;

    if (existing) {
      existing[day] = cellData;
      existing.rowType = type;
      await window.dataSdk.update(existing);
    } else {
      const newRecord = {
        timeSlot: time,
        monday: '',
        tuesday: '',
        wednesday: '',
        thursday: '',
        friday: '',
        rowType: type
      };
      newRecord[day] = cellData;
      await window.dataSdk.create(newRecord);
    }
  }

  closeModal();
  showToast('Altera√ß√£o salva! üìù');
}

function filterType(type) {
  currentFilter = type;
  document.querySelectorAll('.filter-btn').forEach(btn => btn.classList.remove('active'));
  event.target.classList.add('active');
  applyFilter();
}

function applyFilter() {
  const rows = document.querySelectorAll('#table-body tr');
  rows.forEach(row => {
    if (currentFilter === 'all') {
      row.style.display = '';
    } else {
      const cells = row.querySelectorAll('.cell:not(.cell-empty)');
      let hasType = false;
      cells.forEach(cell => {
        if (cell.classList.contains(currentFilter)) hasType = true;
      });
      row.style.display = hasType ? '' : 'none';
    }
  });
}

function updateSummary() {
  let totalHours = 0, aulasHours = 0, extHours = 0, compHours = 0;

  scheduleData.forEach(record => {
    const timeSlot = record.timeSlot;
    const hour = HOURS.find(h => h.time === timeSlot);

    if (!hour || hour.time === '‚Äî') return;

    const [start, end] = timeSlot.split('‚Äì');
    const [sh, sm] = start.split(':').map(Number);
    const [eh, em] = end.split(':').map(Number);
    const minutes = (eh * 60 + em) - (sh * 60 + sm);
    const hours = minutes / 60;

    // Check each day for content and extract type
    const days = ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'];
    days.forEach(day => {
      if (record[day]) {
        const type = record[day].split('::')[0];
        if (type === 'aula') aulasHours += hours;
        else if (type === 'ext') extHours += hours;
        else if (type === 'comp') compHours += hours;
        totalHours += hours;
      }
    });
  });

  document.getElementById('total-week').textContent = `${totalHours.toFixed(1)}h`;
  document.getElementById('total-aulas').textContent = `${aulasHours.toFixed(1)}h`;
  document.getElementById('total-ext').textContent = `${extHours.toFixed(1)}h`;
  document.getElementById('total-comp').textContent = `${compHours.toFixed(1)}h`;
}

function showToast(message) {
  const toast = document.createElement('div');
  toast.className = 'toast';
  toast.textContent = message;
  document.body.appendChild(toast);
  setTimeout(() => toast.remove(), 3000);
}

function exportPDF() {
  window.print();
  closeExportMenu();
}

function exportCSV() {
  let csv = 'Hor√°rio,Segunda,Ter√ßa,Quarta,Quinta,Sexta\n';
  HOURS.forEach(hour => {
    const row = [hour.time];
    ['monday', 'tuesday', 'wednesday', 'thursday', 'friday'].forEach(day => {
      const record = scheduleData.find(r => r.timeSlot === hour.time && r[day]);
      row.push(record ? record[day].split('::')[1] : '');
    });
    csv += row.map(cell => `"${cell}"`).join(',') + '\n';
  });
  const blob = new Blob([csv], { type: 'text/csv' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'horario.csv';
  a.click();
  closeExportMenu();
}

function exportJSON() {
  const json = JSON.stringify(scheduleData, null, 2);
  const blob = new Blob([json], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'horario.json';
  a.click();
  closeExportMenu();
}

function closeExportMenu() {
  document.getElementById('export-menu').classList.remove('active');
}

document.getElementById('export-btn').addEventListener('click', function() {
  document.getElementById('export-menu').classList.toggle('active');
});

document.getElementById('edit-modal').addEventListener('click', (e) => {
  if (e.target === document.getElementById('edit-modal')) closeModal();
});

document.addEventListener('click', (e) => {
  if (!e.target.closest('#export-btn') && !e.target.closest('.export-menu')) {
    closeExportMenu();
  }
});

initApp();
</script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9d31deb1102dca0a',t:'MTc3MTk2NjU4OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
